<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  
	<link href='http://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  
  <link href="style/reset.css" media="all" rel="stylesheet" type="text/css"/>
  <link href="style/shared.css" media="all" rel="stylesheet" type="text/css" />

  <link href="style/leaflet.css" media="all" rel="stylesheet" type="text/css" />

  <link href="style/map.css" media="all" rel="stylesheet" type="text/css" />

  <script src="js_lib/shared_functions.js"></script>
  <script src="js_lib/leaflet.js"></script>
  <script src="js_lib/gpx.js"></script>

</head>
<body>

	<div id="container">
    
    <!-- Container for descriptive  -->
		<div id="header"></div>
    
    <!-- Contains trail map on left side -->
		<div id="trail"></div>
    
    <!-- Interactive map using leaflet -->
    <div id="map"></div>

    <!-- Container for text describing collection site, with link to collection viz -->
		<div id="description"></div>

    <!-- Container for images of dirt samples at each sample site, and links to viz -->
    <div id="dirt"></div>
    
	</div>
	
  <script>
  

  site_lat=37.5558150;
  site_lon=-119.8295270;
  zoom=6;
  
  var trail = L.map('trail', {
    dragging: false,
    touchZoom: false,
    scrollWheelZoom: false,
    doubleClickZoom: false,
    boxZoom: false,
    bounceAtZoomLimits: false,
    minZoom: zoom,
    maxZoom: zoom
  }).setView([site_lat, site_lon], zoom);
  
  // var Stamen_TonerBackground = L.tileLayer('http://{s}.tile.stamen.com/toner-background/{z}/{x}/{y}.png', {
 //    attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
 //    subdomains: 'abcd',
 //    minZoom: 0,
 //    maxZoom: 20
 //  });
 //  
 //  Stamen_TonerBackground.addTo(map);
  
 var socal_trim = 'http://el-ee.github.io/dirt-map/gpx/ca_southern_track_trim.gpx';
 var central_trim = 'http://el-ee.github.io/dirt-map/gpx/ca_central_track_trim.gpx';
 var norcal_trim = 'http://el-ee.github.io/dirt-map/gpx/ca_northern_track_trim.gpx';
  
  var socal = 'http://el-ee.github.io/dirt-map/gpx/ca_southern_track.gpx'; 
  var central = 'http://el-ee.github.io/dirt-map/gpx/ca_central_track.gpx';
  var norcal = 'http://el-ee.github.io/dirt-map/gpx/ca_northern_track.gpx';

  var socal_layer = new L.GPX(socal_trim, {
    async: true,
    marker_options: {
      startIconUrl: 'images/ring.png',
      endIconUrl: 'images/ring.png',
      shadowUrl: 'images/ring.png',    
      iconSize: [100, 100],
      shadowSize: [5, 5]
    },
    polyline_options: {
      // some more options passed to Leaflet Polyline http://leafletjs.com/reference.html#polyline
      color: 'black',
      clickable: false,
      weight: 2
    }
  });
  
  socal_layer.on('loaded', function(e) {
    socal_layer.addTo(trail);
    console.log("success");
  });
  
  new L.GPX(central_trim, {
    async: true,
    marker_options: {
      startIconUrl: 'images/ring.png',
      endIconUrl: 'images/ring.png',
      shadowUrl: 'images/ring.png',
      iconSize: [0,0],
      shadowSize: [0,0]
    },
    polyline_options: {
      // some more options passed to Leaflet Polyline http://leafletjs.com/reference.html#polyline
      color: 'black',
      clickable: false,
      weight: 2
    }
  }).on('loaded', function(e) {}).addTo(trail);
  
  new L.GPX(norcal_trim, {
    async: true,
    marker_options: {
      startIconUrl: 'images/ring.png',
      endIconUrl: 'images/ring.png',
      shadowUrl: 'images/ring.png',
      
      iconSize: [0,0],
      shadowSize: [0,0]
    },
    polyline_options: {
      // some more options passed to Leaflet Polyline http://leafletjs.com/reference.html#polyline
      color: 'black',
      clickable: false,
      weight: 2
    }
  }).on('loaded', function(e) {}).addTo(trail);
  
  for (var loc in collection_locs) {
    var circle = L.circle([collection_locs[loc]["lat"], collection_locs[loc]["lon"]], 500, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.5
    }).addTo(trail); 
  }
  
  </script>

</body>

</html>